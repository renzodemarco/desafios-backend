<header class="w-100 dark">
    <a class="logo" href="/">CD Commerce</a>
    <nav class="navbar navbar-expand-lg">
        <button type="button" class="btn btn-warning">
            <a href="/products">Productos</a>
        </button>
        <button type="button" class="btn btn-warning">
            <a href="/login">Ingresar</a>
        </button>
    </nav>
</header>

<main class="register-main">

    <h1>Registrar nuevo usuario</h1>

    {{#if error}}
        <p class="error">Ha habido un error en su intento de registro, por favor intente de nuevo</p>
    {{/if}}

    <form method="post" id="registerForm">
            <label for="first_name">Nombre:</label>
        <input type="text" name="first_name" id="first_name">
            <label for="last_name">Apellido:</label>
        <input type="text" name="last_name" id="last_name">
                <label for="email">Correo electr칩nico:</label>
        <input type="email" name="email" id="email">
            <label for="age">Edad:</label>
        <input type="text" name="age" id="age">
            <label for="password">Contrase침a:</label>
        <input type="password" name="password" id="password">
                <label for="password2">Repita su contrase침a:</label>
        <input type="password" name="password2" id="password2">

        <input class='btn btn-warning' type="submit" id="submit" value="Registrarse" disabled>   
    </form>

    <p class="error" id="msg"></p>
    <button class='btn btn-secondary w-100' onclick="redirect('/login')">Ya estoy registrado</button>

</main>

<script src="/js/registerForm.js"></script>

<script>
    function redirect(url) {
        window.location.href = url
    }

    const password = document.getElementById('password')
    const password2 = document.getElementById('password2')
    const submit = document.getElementById('submit')
    const msg = document.getElementById('msg')

    const handlePasswords = () => {
        if (password.value !== password2.value) {
            submit.setAttribute('disabled', 'true')
            msg.textContent = 'Las contrase침as no coinciden';
        }
        else if (password.value === password2.value) {
            msg.textContent = '';
            submit.removeAttribute('disabled')
        }
    }

    password.addEventListener('keyup', handlePasswords)
    password2.addEventListener('keyup', handlePasswords)
</script>